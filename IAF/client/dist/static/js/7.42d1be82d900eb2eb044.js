webpackJsonp([7],{"3JD+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("UaxH"),r=n("P9l9"),i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);a=!0);}catch(t){r=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function s(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function a(r,i){try{var s=e[r](i),o=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})}}n("SldL");var o={name:"SearchDetail",components:{CommonSearch:a.a},data:function(){return{listNav:["公司","机构","新闻"],searchResult:{data:[],count:0},value:"",result:[{},{},{}],currentPage:1,index:0}},watch:{"$route.params":function(){var t=this.$route.params.value;this.value=t,this.routeChange()}},methods:{handleCommand:function(t){1==+t?this.$router.push({name:"NewsLink"}):2==+t?this.$router.push({name:"CompanyLink"}):3==+t&&this.$router.push({name:"OrganizationLink"})},dealChoose:function(t){this.index=t,this.changeLiStyle(t),this.handleCurrentChange(1)},changeLiStyle:function(t){var e=this.$refs[t][0];Array.from(e.parentElement.children).forEach(function(t){return t.classList.remove("active")}),e.classList.add("active")},handleCurrentChange:function(t){var e=this;return s(regeneratorRuntime.mark(function n(){var a,i,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.index,i=void 0,s=["compResult","orgResult","newsResult"],0!==a){n.next=8;break}return n.next=5,Object(r.o)({page:t,value:e.value});case 5:i=n.sent,n.next=18;break;case 8:if(1!==a){n.next=14;break}return n.next=11,Object(r.q)({page:t,value:e.value});case 11:i=n.sent,n.next=18;break;case 14:if(2!==a){n.next=18;break}return n.next=17,Object(r.p)({page:t,value:e.value});case 17:i=n.sent;case 18:e.result[a]=i.data.data[s[a]],e.searchResult=e.result[e.index],document.documentElement.scrollTo(0,280);case 21:case"end":return n.stop()}},n,e)}))()},getSearchData:function(t,e,n){var a=this;return s(regeneratorRuntime.mark(function i(){var s,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a.loadingStart(),s=void 0,!n){i.next=7;break}return i.next=5,Promise.all([Object(r.o)({page:t,value:e}),Object(r.q)({page:t,value:e}),Object(r.p)({page:t,value:e})]);case 5:o=i.sent,s=o.map(function(t){return t.data.data});case 7:a.dealSearchDetail(s);case 8:case"end":return i.stop()}},i,a)}))()},dealSearchDetail:function(t){var e=i(t,3),n=e[0].compResult,a=e[1].orgResult,r=e[2].newsResult;this.result[0]=n,this.result[1]=a,this.result[2]=r,this.searchResult=this.result[this.index],this.loadingClose()},handle2PointRouter:function(t){var e=this.index;0===e?this.$router.push({name:"CompanyDetailLink",params:{com_id:t.com_id}}):1===e?this.$router.push({name:"OrganizationDetailLink",params:{org_name:t.org_name}}):2===e&&window.open(t.link)},routeChange:function(){var t=this.$route.params.value;this.getSearchData(1,t,!0)},loadingStart:function(){this.loading=this.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.3)"})},loadingClose:function(){this.loading.close()}},created:function(){this.loadingStart();var t=this.$route.params.value;this.value=t,this.getSearchData(1,t,!0)}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"search-detail"}},[n("common-search"),t._v(" "),n("div",{staticClass:"search-detail-nav"},[n("router-link",{attrs:{tag:"span",to:{name:"HomeLink"}}},[t._v("首页 > ")]),t._v(" "),n("el-dropdown",{on:{command:t.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[t._v("\n                搜索"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown","show-timeout":"100","hide-timeout":"100"},slot:"dropdown"},[n("el-dropdown-item",{staticClass:"iconfont",attrs:{command:"1"}},[t._t("default",[t._v("")]),t._v(" 新闻\n                    ")],2),t._v(" "),n("el-dropdown-item",{staticClass:"iconfont",attrs:{command:"2"}},[t._t("default",[t._v("")]),t._v(" 公司\n                    ")],2),t._v(" "),n("el-dropdown-item",{staticClass:"iconfont",attrs:{command:"3"}},[t._t("default",[t._v("")]),t._v(" 机构\n                ")],2)],1)],1)],1),t._v(" "),n("div",{staticClass:"search-detail-content"},[n("ul",{staticClass:"search-detail-content-nav"},t._l(t.listNav,function(e,a){return n("li",{key:a,ref:a,refInFor:!0,class:{active:0===a},on:{click:function(e){return t.dealChoose(a)}}},[n("el-badge",{staticClass:"item",attrs:{value:t.result[a].count}},[t._v("\n                    "+t._s(e)+"\n                ")])],1)}),0),t._v(" "),n("ul",{staticClass:"search-detail-content-list"},[t._l(t.searchResult.data,function(e,a){return n("li",{key:a},[t._m(0,!0),t._v(" "),n("div",{staticClass:"search-detail-content-list-meg"},[n("p",{on:{click:function(n){return t.handle2PointRouter(e)}}},[t._v(t._s(e.com_name||e.org_name||e.title))]),t._v(" "),n("p",[t._v(t._s(e.com_msg||e.org_msg||e.content||"-"))])])])}),t._v(" "),0===t.searchResult.data.length?n("p",{staticStyle:{height:"100px","line-height":"100px","text-align":"center","font-size":"20px",color:"#999"}},[t._v("没有匹配的信息")]):t._e(),t._v(" "),n("div",{staticClass:"news-pagination-box clear"},[n("el-pagination",{staticClass:"news-pagination",attrs:{"current-page":t.currentPage,"page-size":20,layout:"prev, pager, next, jumper",total:t.searchResult.count},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],2)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"search-detail-content-list-img"},[e("img",{attrs:{src:n("+GsC"),alt:""}})])}]};var u=n("VU/8")(o,c,!1,function(t){n("r0go")},"data-v-5b12702c",null);e.default=u.exports},r0go:function(t,e){}});